{% extends 'base.html' %}
{% load static%}
{% block viewport %}<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>{% endblock %}
{% block scripts%} <link rel="stylesheet" type="text/css" href="{% static 'core/userforms.css' %}">{% endblock%}


{% block content %}
    <div>
        <h1>Daily Forklift Inspection</h1>
        {% if submitted %}
            Thank you, your daily forklift inspection checklist was submitted successfully.
        {% else %}
            <form action="" method=POST>
                {% csrf_token %}
                <table id="forkliftchecklistform" style="table-layout:fixed; border-collapse:collapse;">
                {% for field in form %}
                    <td><b>{{ field.label }}:</b></td> <td>{{ field }}</br>{{field.errors}}</td>
                    {% if forloop.counter|divisibleby:"2" %}
                        <tr></tr>
                    {% endif %}
                {% endfor %}
                </table>
                
                <table id="mobileforkliftchecklistform" style="table-layout:fixed; border-collapse:collapse;">
                    {% for field in form %}
                        <td><b>{{ field.label }}:</b> <br/>{{ field }}</br>{{field.errors}}</td>
                        {% if forloop.counter|divisibleby:"2" %}
                            <tr></tr>
                        {% endif %}
                    {% endfor %}
                </table>
                
                <input type="submit" value="Submit Checklist" class="btn btn-secondary" />
            </form>
        {% endif %}
    </div>
    <!-- it ain't pretty but it gets the job done -->
    <script>
            if ( $( '#mobileforkliftchecklistform' ).css( 'display' ) == 'none' ){
            $('#mobileforkliftchecklistform').remove();
            }
            if ( $( '#forkliftchecklistform' ).css( 'display' ) == 'none' ){
                $('#forkliftchecklistform').remove();
                }
            
            //Fix for validation reload to re-check all boxes previously checked by the user
            $("input[checked]").click();
    </script>
{% endblock content %}