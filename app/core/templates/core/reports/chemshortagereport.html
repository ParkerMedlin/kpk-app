{% extends 'base.html' %}


{% block content %}

    {% if no_shortage_found %}
        <div class='text-center'>
            <h1> No shortages found.</h1>
        </div>
    {% else %}
        <div class='text-center'>
            <h1>All Run Shortages for Blends Containing:</h1>
            <h2> {{ item_info.item_pn }} {{ item_info.item_desc }} </h2>
        </div>
        <table class="table text-left table-bordered table-hover">
            <thead class="thead-dark">
                <tr>
                    <th scope="col">Blend</th>
                    <th scope="col">Description</th>
                    <th scope="col">Start Time</th>
                    <th scope="col">Line</th>
                    <th scope="col">Week</th>
                    <th scope="col">Blend Qty for Run</th>
                    <th scope="col">Chem Factor</th>
                    <th scope="col">Chem Qty for Run</th>
                    <th scope="col">Blend OH After</th>
                    <th scope="col">Chem OH After</th>
                </tr>
            </thead>
            {% for item in prod_run_list %}
                <tr>
                    {% if item.chem_oh_after_run < 0 %}
                            <td style="background-color:rgb(250, 189, 109)">{{ item.component_item_code }}</td>
                            <td style="background-color:rgb(250, 189, 109)">{{ item.component_item_description }}</td>
                            <td style="background-color:rgb(250, 189, 109)">{{ item.starttime|floatformat:2 }}</td>
                            <td style="background-color:rgb(250, 189, 109)">{{ item.prodline }}</td>
                            <td style="background-color:rgb(250, 189, 109)">{{ item.week_calc }}</td>
                            <td style="background-color:rgb(250, 189, 109)">{{ item.adjustedrunqty|floatformat:2 }}</td>
                            <td style="background-color:rgb(250, 189, 109)">{{ item.chem_factor|floatformat:2 }}</td>
                            <td style="background-color:rgb(250, 189, 109)">{{ item.chem_needed_for_run|floatformat:2 }}</td>
                            <td style="background-color:rgb(250, 189, 109)">{{ item.oh_after_run|floatformat:2 }}</td>
                            <td style="background-color:rgb(250, 189, 109)">{{ item.chem_oh_after_run|floatformat:2 }}</td>
                        {% else %}
                            <td>{{ item.component_item_code }}</td>
                            <td>{{ item.component_item_description }}</td>
                            <td>{{ item.starttime|floatformat:2 }}</td>
                            <td>{{ item.prodline }}</td>
                            <td>{{ item.week_calc }}</td>
                            <td>{{ item.adjustedrunqty|floatformat:2 }}</td>
                            <td>{{ item.chem_factor|floatformat:2 }}</td>
                            <td>{{ item.chem_needed_for_run|floatformat:2 }}</td>
                            <td>{{ item.oh_after_run|floatformat:2 }}</td>
                            <td>{{ item.chem_oh_after_run|floatformat:2 }}</td>
                        {% endif %}
                </tr>
            {% endfor %}
        </table>
    {% endif %}
{% endblock content %}